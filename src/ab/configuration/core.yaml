# Bernese GNSS Software [BSW] environment variables available after 'source'ing
# the shell script `LOADGPS.setvar` in the root of the installation directory.
bsw_env:

  # Installation directory
  C: &C !ENV C

  # Bernese documentation files
  DOC: &DOC !ENV DOC

  # Built-in Bernese program panels
  PAN: &PAN !ENV PAN

  # Global model files used by Bernese programs
  MODEL: &MODEL !ENV MODEL

  # Global configuration file used by Bernese programs
  CONFIG: &CONFIG !ENV CONFIG

  # DATAPOOL directory
  D: &D !ENV D

  # CAMPAIGN directory
  P: &P !ENV P

  # SAVEDISK directory
  S: &S !ENV S

  # User directory
  U: &U !ENV U

  # Temporary directory
  T: &T !ENV T

# Specific files in the Bernese environment that we need to access
bsw_files:

  # Release-information file
  release_info: !Path [*DOC, RELEASE.TXT]

  # Input file with the list of existing Bernese campaigns
  campaign_menu: !Path [*PAN, MENU_CMP.INP]

# We define the environment root directory as the one containing the BSW
# installation. It is assumed to be a directory that each user can can write to.
env: &env !Parent [*C]

# AutoBernese runtime environment
runtime:

  # Root directory for runtime files
  ab: &ab !Path [*env, autobernese]

  # Keyword arguments to the Python logging module
  logging:
    filename: !Path [*ab, autobernese.log]
    # Note the field `{user}` which is replaced at runtime with Python's getpass.getuser()
    format: '%(asctime)s | {user} | %(levelname)s | %(name)s | %(message)s'
    datefmt: '%Y-%m-%d %H:%M:%S'
    style: '%'
    level: DEBUG

  # Campaign-configuration template directory
  campaign_templates: !Path [*ab, templates]

  # Filename for the common configuration
  common_config: !Path [*ab, autobernese.yaml]

  # Sections that can be added to or overridden in the core configuration
  sections_to_override:
  - metadata
  - environment
  - sources
  - tasks
  - station
  - clean
  - troposphere
  - campaign

# Default content for the above sections_to_override. These sections can be
# overriden by the user in the general configuration file autobernese.yaml or in
# the campaign configuration (including the template).

campaign:
  directories:
  - name: ATM
  - name: BPE
  - name: GEN
    files:
    - !Path [*CONFIG, OBSERV.SEL]
    - !Path [*PAN, SESSIONS.SES]
  - name: GRD
  - name: OBS
  - name: ORB
  - name: ORX
  - name: OUT
  - name: RAW
  - name: SOL
  - name: STA

troposphere:

  # NOTE: The `data` section is under development. It main purpose is to provide
  # the YAML anchors for our defaults and make them available in the rest of the
  # configuration files.
  data:

    common:
      hour_extensions: &CORE_HOUR_EXTENSIONS ['00', '06', '12', '18']

    VMF3_OP_1X1:
      hour_url: &CORE_URL_H_VMF3_OP_1X1 https://vmf.geo.tuwien.ac.at/trop_products/GRID/1x1/VMF3/VMF3_OP/{date.year}
      date_beg: &CORE_DATE_BEG_VMF3_OP_1X1 2008-01-01
      date_end: &CORE_DATE_END_VMF3_OP_1X1 null
      hour_directory: &CORE_DIR_H_VMF3_OP_1X1 !Path [*D, VMF3, '1x1_OP_H', '{date.year}']
      grd_directory: &CORE_DIR_GRD_VMF3_OP_1X1 !Path [*D, VMF3, '1x1_OP_GRD', '{date.year}']
      hour_filename: &CORE_FNAME_H_VMF3_OP_1X1 'VMF3_{date.year}{date.month:02d}{date.day:02d}.H{hour}'
      grd_filename: &CORE_FNAME_GRD_VMF3_OP_1X1 'VMF3_{date.year}{date.doy:03d}0.GRD'

    VMF3_EI_1X1:
      hour_url: &CORE_URL_H_VMF3_EI_1X1 https://vmf.geo.tuwien.ac.at/trop_products/GRID/1x1/VMF3/VMF3_EI/{date.year}
      date_beg: &CORE_DATE_BEG_VMF3_EI_1X1 1997-01-01
      date_end: &CORE_DATE_END_VMF3_EI_1X1 2007-12-31
      hour_directory: &CORE_DIR_H_VMF3_EI_1X1 !Path [*D, VMF3, '1x1_EI_H', '{date.year}']
      grd_directory: &CORE_DIR_GRD_VMF3_EI_1X1 !Path [*D, VMF3, '1x1_EI_GRD', '{date.year}']
      hour_filename: &CORE_FNAME_H_VMF3_EI_1X1 'VMF3_{date.year}{date.month:02d}{date.day:02d}.H{hour}'
      grd_filename: &CORE_FNAME_GRD_VMF3_EI_1X1 'VMF3_{date.year}{date.doy:03d}0.GRD'

    VMF1_OP_2.5X2:
      hour_url: &CORE_URL_H_VMF1_OP_2COMMA5X2 https://vmf.geo.tuwien.ac.at/trop_products/GRID/2.5x2/VMF1/VMF1_OP/{date.year}
      date_beg: &CORE_DATE_BEG_VMF1_OP_2COMMA5X2 1985-01-01
      date_end: &CORE_DATE_END_VMF1_OP_2COMMA5X2 null
      hour_directory: &CORE_DIR_H_VMF1_OP_2COMMA5X2 !Path [*D, VMF1, '1x1_EI_H', '{date.year}']
      grd_directory: &CORE_DIR_GRD_VMF1_OP_2COMMA5X2 !Path [*D, VMF1, '1x1_EI_GRD', '{date.year}']
      hour_filename: &CORE_FNAME_H_VMF1_OP_2COMMA5X2 'VMFG_{date.year}{date.month:02d}{date.day:02d}.H{hour}'
      grd_filename: &CORE_FNAME_GRD_VMF1_OP_2COMMA5X2 'VMFG_{date.year}{date.doy:03d}0.GRD'

  # Default argumemts for the troposphere CLI
  # Define your own in the common or campaign-specific configuration file.
  ipath: *CORE_DIR_H_VMF3_OP_1X1
  opath: *CORE_DIR_GRD_VMF3_OP_1X1
  ifname: *CORE_FNAME_H_VMF3_OP_1X1
  ofname: *CORE_FNAME_GRD_VMF3_OP_1X1
  beg: *CORE_DATE_BEG_VMF3_OP_1X1
  end: *CORE_DATE_END_VMF3_OP_1X1
